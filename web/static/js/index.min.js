var view,choose,links,ldcv={view:new ldcover({root:".ldcv.ldcv-view"}),font:new ldcover({root:".ldcv.ldcv-font"})},parse=function(i){return ld$.find(".ldcv.ldcv-view i").map(function(e,t){var n=e.getAttribute("class");return n=n.replace(/i-\S+/g,""),e.setAttribute("class",n),e.classList.add("i-"+i)}),ldcv.view.toggle(!0)};ld$.fetch("assets/lib/ldif/dev/ldif.json",{method:"GET"},{type:"json"}).then(function(e){return new ldview({root:document.body,handler:{glyph:{key:function(e){return e.name},list:function(){return e},view:{action:{click:{cell:function(e){e=e.context;return parse(e.name)}}},text:{name:function(e){return e.context.name},code:function(e){return e.context.code}},handler:{icon:function(e){var t=e.node,e=e.context;return t.classList.add("i-"+e.name)}}}}}})}),view=new ldview({root:".ldcv.ldcv-view",action:{change:{fontfamily:function(e){e=e.node;return view.get("viewer").style.fontFamily=e.value},fontsize:function(e){e=e.node;return view.get("viewer").style.fontSize=e.value+"px"},iconname:function(e){e=e.node;return view.get("icon").setAttribute("class","i-"+e.value)},iconsize:function(e){e=e.node;return view.get("icon").style.fontSize=e.value+"em"},verticaloffset:function(e){var t=e.node,e=view.get("icon").style;return e.position="relative",e.top=t.value+"px",e}},click:{morefont:function(){return ldcv.font.toggle()},hint:function(){return view.get("viewer").classList.toggle("active"),view.get("hint-text").innerText=view.get("viewer").classList.contains("active")?"On":"Off"},useflexbox:function(){return view.get("inner").classList.toggle("d-flex"),view.get("inner").classList.toggle("align-items-center"),view.get("inner").classList.toggle("justify-content-center"),view.get("flexbox-text").innerText=view.get("inner").classList.contains("d-flex")?"On":"Off"}}}}),(choose=new ChooseFont({root:".ldcv.ldcv-font .chooser",metaUrl:"assets/lib/choosefont.js/main/fontinfo/meta.json",base:"https://plotdb.github.io/xl-fontset/alpha"})).on("choose",function(t){return xfl.load(t.path,{},function(e){return e.sync("Hga國一ば뮤"),view.get("viewer").style.fontFamily=t.name,ldcv.font.toggle(!1)})}),choose.init(),links=["line-24-bold","line-16-light"].map(function(e){var t=document.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href","assets/lib/ldif/dev/"+e+"/ldif.css"),{node:t,name:e}}),document.head.appendChild(links[0].node),view=new ldview({root:document.body,handler:{switch:{list:function(){return links},key:function(e){return e.name},action:{click:function(e){e=e.data;return links.map(function(e){if(e.node.parentNode)return e.node.parentNode.removeChild(e.node)}),document.head.appendChild(e.node),view.render()}},text:function(e){e.node;return e.data.name},handler:function(e){var t=e.node,e=e.data;return t.classList.toggle("active",e.node.parentNode)}}}});